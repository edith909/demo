-- =======================================
-- ORACLE DML PRACTICE SCRIPT (shopDB EQUIVALENT)
-- =======================================
-- Note:
-- 1. Oracle does NOT support CREATE DATABASE / USE like MySQL.
--    Run this script in the desired Oracle schema/user.
-- =======================================

-- =======================================
-- CREATE SAMPLE TABLES FOR DML OPERATIONS
-- =======================================

-- Products table
CREATE TABLE Products (
    product_id   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    product_name VARCHAR2(100) NOT NULL,
    price        NUMBER(10,2),
    category     VARCHAR2(50)
);

-- Customers table
CREATE TABLE Customers (
    customer_id   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    customer_name VARCHAR2(100),
    city          VARCHAR2(50)
);

-- Orders table
CREATE TABLE Orders (
    order_id    NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    customer_id NUMBER,
    product_id  NUMBER,
    quantity    NUMBER,
    CONSTRAINT fk_orders_customer
        FOREIGN KEY (customer_id) REFERENCES Customers(customer_id),
    CONSTRAINT fk_orders_product
        FOREIGN KEY (product_id) REFERENCES Products(product_id)
);

-- =======================================
-- INSERT COMMANDS
-- =======================================

-- Insert single row
INSERT INTO Products (product_name, price, category)
VALUES ('Laptop', 55000, 'Electronics');

-- Insert multiple rows
INSERT ALL
    INTO Products (product_name, price, category)
        VALUES ('Mobile', 20000, 'Electronics')
    INTO Products (product_name, price, category)
        VALUES ('Shoes', 1500, 'Fashion')
    INTO Products (product_name, price, category)
        VALUES ('Watch', 2500, 'Accessories')
SELECT 1 FROM DUAL;

INSERT ALL
    INTO Customers (customer_name, city)
        VALUES ('Rohit Sharma', 'Mumbai')
    INTO Customers (customer_name, city)
        VALUES ('Virat Kohli', 'Delhi')
    INTO Customers (customer_name, city)
        VALUES ('MS Dhoni', 'Ranchi')
SELECT 1 FROM DUAL;

INSERT ALL
    INTO Orders (customer_id, product_id, quantity)
        VALUES (1, 1, 1)
    INTO Orders (customer_id, product_id, quantity)
        VALUES (2, 2, 2)
    INTO Orders (customer_id, product_id, quantity)
        VALUES (3, 3, 1)
SELECT 1 FROM DUAL;

-- =======================================
-- SELECT COMMANDS
-- =======================================

-- Select all rows
SELECT * FROM Products;

-- Specific columns
SELECT product_name, price FROM Products;

-- WHERE
SELECT * FROM Products WHERE price > 5000;

-- LIKE
SELECT * FROM Customers WHERE customer_name LIKE 'R%';

-- IN
SELECT * FROM Products WHERE category IN ('Electronics', 'Fashion');

-- BETWEEN
SELECT * FROM Products WHERE price BETWEEN 1000 AND 30000;

-- ORDER BY
SELECT * FROM Products ORDER BY price ASC;

-- LIMIT (MySQL) -> FETCH FIRST in Oracle
SELECT * FROM Products
FETCH FIRST 3 ROWS ONLY;

-- (Alternative older style)
-- SELECT * FROM Products WHERE ROWNUM <= 3;

-- =======================================
-- AGGREGATE FUNCTIONS
-- =======================================

SELECT COUNT(*) AS total_products FROM Products;

SELECT MAX(price) AS highest_price FROM Products;

SELECT MIN(price) AS lowest_price FROM Products;

SELECT AVG(price) AS avg_price FROM Products;

SELECT SUM(price) AS total_price FROM Products;

-- =======================================
-- GROUP BY / HAVING
-- =======================================

SELECT category, COUNT(*) AS total_items
FROM Products
GROUP BY category;

SELECT category, AVG(price) AS avg_price
FROM Products
GROUP BY category
HAVING AVG(price) > 2000;

-- =======================================
-- UPDATE COMMANDS
-- =======================================

-- Update single column
UPDATE Products
SET price = 60000
WHERE product_name = 'Laptop';

-- Update multiple columns
UPDATE Customers
SET customer_name = 'Virat K',
    city          = 'Bangalore'
WHERE customer_id = 2;

-- Update all rows
UPDATE Products
SET price = price + 100;

-- =======================================
-- DELETE COMMANDS
-- =======================================

-- Delete single row
DELETE FROM Products
WHERE product_name = 'Shoes';

-- Delete using condition
DELETE FROM Customers
WHERE city = 'Ranchi';

-- Delete all rows (DML)
DELETE FROM Orders;

-- =======================================
-- SELECT WITH JOINS
-- =======================================

-- INNER JOIN
SELECT c.customer_name, p.product_name, o.quantity
FROM   Orders    o
       INNER JOIN Customers c ON o.customer_id = c.customer_id
       INNER JOIN Products  p ON o.product_id  = p.product_id;

-- LEFT JOIN
SELECT c.customer_name, o.order_id
FROM   Customers c
       LEFT JOIN Orders o ON c.customer_id = o.customer_id;

-- RIGHT JOIN
SELECT p.product_name, o.order_id
FROM   Products p
       RIGHT JOIN Orders o ON p.product_id = o.product_id;

-- =======================================
-- END OF DML SCRIPT
-- =======================================
